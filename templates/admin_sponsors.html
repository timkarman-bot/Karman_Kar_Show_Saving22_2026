{% extends "base.html" %}
{% set title = "Sponsors • Admin" %}

{% block content %}
<div class="max-w-5xl">
  <div class="flex items-end justify-between gap-4">
    <div>
      <div class="text-xs font-semibold text-slate-500">RESTRICTED</div>
      <h1 class="mt-1 text-3xl font-semibold tracking-tight">Sponsors</h1>
      <p class="mt-2 text-slate-600">{{ show["title"] }}</p>
    </div>
    <a class="btn btn-outline" href="{{ url_for('admin_page') }}">Back to admin</a>
  </div>

  <div class="mt-6 rounded-3xl bg-white border border-slate-200 shadow-sm p-6">
    <div class="text-xs font-semibold text-slate-500">ADD / UPDATE SPONSOR</div>
    <form class="mt-4 grid gap-4 md:grid-cols-2" method="POST" action="{{ url_for('admin_sponsors_add') }}">
      <div>
        <label class="text-sm font-semibold">Sponsor name *</label>
        <input name="name" class="mt-1 w-full rounded-2xl border border-slate-200 px-4 py-3" required>
      </div>
      <div>
        <label class="text-sm font-semibold">Placement</label>
        <select name="placement" class="mt-1 w-full rounded-2xl border border-slate-200 px-4 py-3">
          <option value="title">Title sponsor</option>
          <option value="standard" selected>Standard sponsor</option>
        </select>
      </div>

      <div>
        <label class="text-sm font-semibold">Logo path (static/…)</label>
        <input name="logo_path" placeholder="img/sponsors/acme.png"
               class="mt-1 w-full rounded-2xl border border-slate-200 px-4 py-3">
        <div class="mt-1 text-xs text-slate-500">Put files in static/img/sponsors/ then reference as img/sponsors/filename.png</div>
      </div>
      <div>
        <label class="text-sm font-semibold">Website URL (optional)</label>
        <input name="website_url" placeholder="https://example.com"
               class="mt-1 w-full rounded-2xl border border-slate-200 px-4 py-3">
      </div>

      <div>
        <label class="text-sm font-semibold">Sort order (standard sponsors)</label>
        <input name="sort_order" value="100" inputmode="numeric"
               class="mt-1 w-full rounded-2xl border border-slate-200 px-4 py-3">
      </div>

      <div class="flex items-end">
        <button class="btn btn-primary" type="submit">Save sponsor</button>
      </div>
    </form>
  </div>

  <div class="mt-6 grid gap-4 md:grid-cols-2">
    <div class="rounded-3xl bg-white border border-slate-200 shadow-sm p-6">
      <div class="text-xs font-semibold text-slate-500">TITLE SPONSOR</div>
      <div class="mt-3">
        {% if title_sponsor %}
          <div class="flex items-center gap-4">
            {% if title_sponsor["logo_path"] %}
              <img class="h-12 w-auto" src="{{ url_for('static', filename=title_sponsor['logo_path']) }}" alt="{{ title_sponsor['name'] }}">
            {% endif %}
            <div class="font-semibold">{{ title_sponsor["name"] }}</div>
          </div>
        {% else %}
          <div class="text-sm text-slate-600">None set</div>
        {% endif %}
      </div>
    </div>

    <div class="rounded-3xl bg-white border border-slate-200 shadow-sm p-6">
      <div class="text-xs font-semibold text-slate-500">STANDARD SPONSORS</div>
      <div class="mt-3 space-y-3">
        {% for s in sponsors %}
          <div class="flex items-center justify-between gap-3 rounded-2xl border border-slate-200 p-3">
            <div class="flex items-center gap-3 min-w-0">
              {% if s["logo_path"] %}
                <img class="h-10 w-auto" src="{{ url_for('static', filename=s['logo_path']) }}" alt="{{ s['name'] }}">
              {% endif %}
              <div class="min-w-0">
                <div class="font-semibold truncate">{{ s["name"] }}</div>
                {% if s["website_url"] %}
                  <div class="text-xs text-slate-500 truncate">{{ s["website_url"] }}</div>
                {% endif %}
              </div>
            </div>
            <form method="POST" action="{{ url_for('admin_sponsors_remove') }}">
              <input type="hidden" name="sponsor_id" value="{{ s['id'] }}">
              <button class="px-3 py-2 rounded-xl border border-red-200 text-red-700 hover:bg-red-50" type="submit">Remove</button>
            </form>
          </div>
        {% endfor %}
        {% if not sponsors %}
          <div class="text-sm text-slate-600">No standard sponsors yet</div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
