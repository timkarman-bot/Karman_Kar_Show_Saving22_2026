{% extends "base.html" %}
{% set title = "Admin Sponsors â€¢ Karman Kar Shows & Events" %}

{% block content %}
<div class="max-w-5xl">
  <div class="flex items-end justify-between gap-4">
    <div>
      <div class="text-xs font-semibold text-slate-500">RESTRICTED</div>
      <h1 class="mt-1 text-3xl font-semibold tracking-tight">Sponsors</h1>
      <p class="mt-2 text-slate-600">Add a title sponsor and optional sponsor logos for this show.</p>
    </div>
    <a class="px-4 py-2 rounded-xl border border-slate-200 hover:bg-slate-50" href="{{ url_for('admin_page') }}">Back to Admin</a>
  </div>

  <div class="mt-6 grid gap-4 lg:grid-cols-2">
    <div class="rounded-3xl bg-white border border-slate-200 shadow-sm p-6">
      <div class="text-xs font-semibold text-slate-500">ADD / UPDATE SPONSOR</div>
      <form class="mt-4 grid gap-3" method="POST" action="{{ url_for('admin_sponsors_add') }}">
        <label class="text-sm font-semibold">Sponsor name</label>
        <input name="name" class="rounded-2xl border border-slate-200 px-4 py-3" placeholder="ACME Plumbing" required>

        <label class="text-sm font-semibold">Logo path (inside /static)</label>
        <input name="logo_path" class="rounded-2xl border border-slate-200 px-4 py-3"
               placeholder="img/sponsors/acme.png">

        <label class="text-sm font-semibold">Website (optional)</label>
        <input name="website_url" class="rounded-2xl border border-slate-200 px-4 py-3"
               placeholder="https://example.com">

        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="text-sm font-semibold">Placement</label>
            <select name="placement" class="mt-1 w-full rounded-2xl border border-slate-200 px-4 py-3">
              <option value="title">Title sponsor</option>
              <option value="standard" selected>Standard</option>
            </select>
          </div>
          <div>
            <label class="text-sm font-semibold">Sort order (standard only)</label>
            <input name="sort_order" class="mt-1 w-full rounded-2xl border border-slate-200 px-4 py-3" value="100">
          </div>
        </div>

        <button class="mt-2 px-5 py-3 rounded-2xl bg-slate-900 text-white hover:opacity-90" type="submit">
          Save sponsor
        </button>

        <div class="text-xs text-slate-500">
          Tip: upload logos into <code class="px-1 py-0.5 bg-slate-100 rounded">static/img/sponsors/</code> and use the path like <b>img/sponsors/logo.png</b>.
        </div>
      </form>
    </div>

    <div class="rounded-3xl bg-white border border-slate-200 shadow-sm p-6">
      <div class="text-xs font-semibold text-slate-500">CURRENT SPONSORS</div>

      <div class="mt-4">
        <div class="text-sm font-semibold">Title sponsor</div>
        {% if title_sponsor %}
          <div class="mt-2 flex items-center justify-between gap-3 rounded-2xl border border-slate-200 p-4">
            <div class="min-w-0">
              <div class="font-semibold">{{ title_sponsor["name"] }}</div>
              <div class="text-xs text-slate-500">{{ title_sponsor["logo_path"] or "No logo path" }}</div>
            </div>
            <form method="POST" action="{{ url_for('admin_sponsors_remove') }}">
              <input type="hidden" name="sponsor_id" value="{{ title_sponsor['id'] }}">
              <button class="px-3 py-2 rounded-xl border border-red-200 text-red-700 hover:bg-red-50" type="submit">Remove</button>
            </form>
          </div>
        {% else %}
          <div class="mt-2 text-sm text-slate-600">No title sponsor set.</div>
        {% endif %}
      </div>

      <div class="mt-6">
        <div class="text-sm font-semibold">Standard sponsors</div>

        {% if sponsors and sponsors|length > 0 %}
          <div class="mt-2 grid gap-2">
            {% for s in sponsors %}
              <div class="flex items-center justify-between gap-3 rounded-2xl border border-slate-200 p-4">
                <div class="min-w-0">
                  <div class="font-semibold">{{ s["name"] }}</div>
                  <div class="text-xs text-slate-500">{{ s["logo_path"] or "No logo path" }}</div>
                </div>
                <form method="POST" action="{{ url_for('admin_sponsors_remove') }}">
                  <input type="hidden" name="sponsor_id" value="{{ s['id'] }}">
                  <button class="px-3 py-2 rounded-xl border border-red-200 text-red-700 hover:bg-red-50" type="submit">Remove</button>
                </form>
              </div>
            {% endfor %}
          </div>
        {% else %}
          <div class="mt-2 text-sm text-slate-600">No standard sponsors yet.</div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
