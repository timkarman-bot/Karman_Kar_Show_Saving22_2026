{% extends "base.html" %}
{% set title = "Home • Karman Kar Shows & Events" %}

{% block content %}
{% if not show %}
  <div class="rounded-3xl bg-white border border-slate-200 p-8 shadow-sm">
    <h1 class="text-2xl font-semibold">No active show configured</h1>
    <p class="mt-2 text-slate-600">Set an active show in the database to display the current event.</p>
  </div>
{% else %}
<section class="grid gap-6 lg:grid-cols-2 items-start">
  <div class="rounded-3xl p-8 glass border border-slate-200 shadow-sm">
    <div class="flex flex-wrap items-center gap-2">
      <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-slate-900 text-white text-xs">
        Current Featured Event
      </div>

      <span class="inline-flex items-center gap-2 px-3 py-1 rounded-full border text-xs
        {% if show['voting_open'] == 1 %}
          border-emerald-200 bg-emerald-50 text-emerald-800
        {% else %}
          border-amber-200 bg-amber-50 text-amber-800
        {% endif %}">
        {% if show["voting_open"] == 1 %}Voting Open{% else %}Voting Closed{% endif %}
      </span>
    </div>

    <h1 class="mt-4 text-4xl font-semibold tracking-tight">{{ show["title"] }}</h1>
    <p class="mt-3 text-slate-700 max-w-xl">{{ show["description"] }}</p>

    <div class="mt-6 grid gap-2 text-sm text-slate-700">
      {% if show["date"] %}<div><span class="font-semibold">Date:</span> {{ show["date"] }}</div>{% endif %}
      {% if show["time"] %}<div><span class="font-semibold">Time:</span> {{ show["time"] }}</div>{% endif %}
      {% if show["location_name"] %}<div><span class="font-semibold">Location:</span> {{ show["location_name"] }}</div>{% endif %}
      {% if show["address"] %}<div><span class="font-semibold">Address:</span> {{ show["address"] }}</div>{% endif %}
      {% if show["benefiting"] %}<div><span class="font-semibold">Benefiting:</span> {{ show["benefiting"] }}</div>{% endif %}
      {% if show["suggested_donation"] %}<div><span class="font-semibold">Donation:</span> {{ show["suggested_donation"] }}</div>{% endif %}
    </div>

    <div class="mt-8 flex flex-wrap gap-3">
      <a href="{{ url_for('show_page', slug=show['slug']) }}"
         class="px-5 py-3 rounded-2xl bg-slate-900 text-white hover:opacity-90">
        View show details
      </a>
      <a href="{{ url_for('register_page') }}"
         class="px-5 py-3 rounded-2xl bg-white border border-slate-200 hover:bg-slate-50">
        Register your car
      </a>
      <a href="{{ url_for('events') }}"
         class="px-5 py-3 rounded-2xl bg-white border border-slate-200 hover:bg-slate-50">
        Upcoming events
      </a>
    </div>

    <div class="mt-6 text-xs text-slate-500">
      Voting is done by scanning QR codes on each car. You choose how many votes, pay $1 per vote, and votes are recorded automatically.
      <span class="block mt-1">Max 50 votes per checkout (you can repeat if desired).</span>
    </div>
  </div>

  <div class="rounded-3xl bg-white border border-slate-200 shadow-sm p-8">
    <h2 class="text-xl font-semibold">How voting works</h2>
    <div class="mt-4 grid gap-4">
      <div class="rounded-2xl border border-slate-200 p-4">
        <div class="font-semibold">1) Scan a QR code</div>
        <div class="text-sm text-slate-600 mt-1">
          Each category has its own QR code for that car, so the category is locked automatically.
        </div>
      </div>
      <div class="rounded-2xl border border-slate-200 p-4">
        <div class="font-semibold">2) Choose vote quantity</div>
        <div class="text-sm text-slate-600 mt-1">
          $1 per vote. Up to 50 per checkout (repeat if desired). Designed for phones and kiosks.
        </div>
      </div>
      <div class="rounded-2xl border border-slate-200 p-4">
        <div class="font-semibold">3) Pay securely</div>
        <div class="text-sm text-slate-600 mt-1">
          Checkout is powered by Stripe. Votes only record after payment succeeds.
        </div>
      </div>
    </div>

    <div class="mt-6 rounded-2xl bg-slate-50 border border-slate-200 p-4">
      <div class="font-semibold">Sponsors</div>
      <div class="text-sm text-slate-600 mt-1">
        Sponsor placement appears on show and voting pages so it’s visible without distracting from voting.
      </div>
    </div>
  </div>
</section>
{% endif %}
{% endblock %}
