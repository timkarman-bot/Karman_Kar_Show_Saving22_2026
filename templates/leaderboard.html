{% extends "base.html" %}
{% set title = "Leaderboard â€¢ Admin" %}

{% block content %}
<div class="max-w-5xl">
  <div class="flex items-end justify-between gap-4">
    <div>
      <div class="text-xs font-semibold text-slate-500">RESTRICTED</div>
      <h1 class="mt-1 text-3xl font-semibold tracking-tight">Leaderboard</h1>
      <p class="mt-2 text-slate-600">{{ show["title"] }}</p>
    </div>
    <a class="btn btn-outline" href="{{ url_for('admin_page') }}">Back to admin</a>
  </div>

  <div class="mt-6 rounded-3xl bg-white border border-slate-200 shadow-sm p-6">
    <div class="text-xs font-semibold text-slate-500">OVERALL</div>
    <div class="mt-3 overflow-x-auto">
      <table class="w-full text-sm">
        <thead class="text-xs uppercase text-slate-500">
          <tr>
            <th class="text-left py-2">Rank</th>
            <th class="text-left py-2">Car #</th>
            <th class="text-left py-2">Votes</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-slate-100">
          {% for row in overall %}
            <tr>
              <td class="py-3 font-semibold">#{{ loop.index }}</td>
              <td class="py-3 font-semibold">#{{ row[0] }}</td>
              <td class="py-3">{{ row[1] }}</td>
            </tr>
          {% endfor %}
          {% if not overall %}
            <tr><td class="py-5 text-slate-500" colspan="3">No votes yet.</td></tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>

  <div class="mt-6 grid gap-4">
    {% for category, rows in by_category.items() %}
      <div class="rounded-3xl bg-white border border-slate-200 shadow-sm p-6">
        <div class="text-xs font-semibold text-slate-500">CATEGORY</div>
        <div class="mt-1 text-2xl font-semibold">{{ category }}</div>

        <div class="mt-3 overflow-x-auto">
          <table class="w-full text-sm">
            <thead class="text-xs uppercase text-slate-500">
              <tr>
                <th class="text-left py-2">Rank</th>
                <th class="text-left py-2">Car #</th>
                <th class="text-left py-2">Votes</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-slate-100">
              {% for r in rows %}
                <tr>
                  <td class="py-3 font-semibold">#{{ loop.index }}</td>
                  <td class="py-3 font-semibold">#{{ r[0] }}</td>
                  <td class="py-3">{{ r[1] }}</td>
                </tr>
              {% endfor %}
              {% if not rows %}
                <tr><td class="py-5 text-slate-500" colspan="3">No votes yet.</td></tr>
              {% endif %}
            </tbody>
          </table>
        </div>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
